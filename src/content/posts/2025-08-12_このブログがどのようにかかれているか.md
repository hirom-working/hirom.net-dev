---
title: 'このブログの作り方 - 技術構成と執筆フロー'
draft: false
published: 2025-08-12
description: 'Astro、Obsidian、Gemini-cliを使った、このブログの技術的な作り方と執筆の裏側を解説します。'
tags:
  - 'Astro'
  - 'TypeScript'
  - 'TailwindCSS'
  - 'Obsidian'
  - 'Gemini-cli'
  - 'Netlify'
toc: true
---

## はじめに

これは、僕が写真撮影のログを残したり、日々の技術的な学びや試したことを記録するためのブログだ。

しかし、まずこのブログを執筆する環境構築がすでに一つの技術的な学びであるため、それを記していこうと思う。


## 執筆とコンテンツ制作のフロー

まず、技術スタックの話の前に、記事のアイデア出しから公開までを支えるツールを紹介したい。

### Obsidian: 思考と執筆のハブ

このブログのすべての記事は、アイデアの種から完成原稿まで、[Obsidian](https://obsidian.md/) というツールで管理している。単なるMarkdownエディタではなく、僕の「第二の脳」だ。

**なぜObsidianか？**

*   **ローカルファーストとポータビリティ:** データはすべてローカルのMarkdownファイルとして保存される。これにより、特定のプラットフォームに縛られることなく、オフラインでも快適に作業できる。このブログのリポジトリ自体をObsidianのVault（保管庫）として開くことで、コードとコンテンツを同じ場所で管理している。
*   **リンクによる知識のネットワーク化:** Obsidian最大の特徴は、`[[ページ名]]` という記法でノート同士を簡単にリンクできること。これにより、断片的なアイデアが繋がり、過去のメモから新しい記事のインスピレーションを得る、といったことが頻繁に起こる。
*   **強力なプラグインエコシステム:** コミュニティ製の豊富なプラグインで、機能を自由に拡張できる。例えば、カレンダー表示で日々の執筆記録を可視化したり、タグでノートを一覧表示したりと、自分だけの執筆環境を構築できる。

**具体的なフロー:**

1.  **アイデアのキャプチャ:** 日々の発見や考えたことを、Obsidianのデイリーノートに書き留める。
2.  **記事の育成:** デイリーノートの断片的なアイデアにリンクを繋げ、関連情報を集めながら、徐々に一つの記事として肉付けしていく。
3.  **執筆:** `src/content/posts` ディレクトリに新しいMarkdownファイルを作り、Obsidianで執筆。プレビューで表示を確認しながら、一気に書き上げる。

このように、Obsidianは単なる執筆ツールではなく、知識を育て、ブログ記事としてアウトプットするための中核を担っている。

### Gemini-cli: 執筆と開発のパートナー

ブログの構成案作成、文章の推敲、そして開発作業の多くは、Google製のCLIツール`gemini-cli`と対話しながら進めている。

*   **記事構成の壁打ち:** 「〜について記事を書きたい」と投げるだけで、章立てや読者が興味を持ちそうな切り口を提案してくれる。
*   **文章の推敲:** 下書きを渡して、「もっと技術ブログらしい表現にして」「この部分を分かりやすく」と指示すれば、文章のクオリティを上げてくれる。
*   **開発サポート:** 「Astroでサイトマップを導入したい」「この正規表現を書いて」といった開発に関する質問や依頼にも、コードを直接生成・修正してくれる。

`gemini-cli`との対話的なやり取りは、一人で考え込む時間を大幅に減らし、執筆と開発のサイクルを高速化する上で不可欠な存在だ。

## コア技術

次に、このブログを支える中心的な技術について。

### Astro: 静的サイトジェネレーター

このブログは、静的サイトジェネレーター（SSG）の[Astro](https://astro.build/)をベースに構築されている。Astroを選んだ理由はシンプルだ。

*   **パフォーマンス:** デフォルトでJavaScriptをほぼ出力しない「アイランドアーキテクチャ」により、非常に高速なサイトを構築できる。
*   **UIフレームワーク非依存:** ReactやVueなど、好みのUIフレームワークをコンポーネント単位で使える。このブログでは主に素のHTMLとCSSで書いているが、将来的に機能を追加する際の自由度が高いのは魅力だ。
*   **コンテンツ重視:** MarkdownやMDXのサポートが手厚く、コンテンツ中心のサイト作りに向いている。

### TypeScript: 型の安全性

設定ファイルや一部のコンポーネントはTypeScriptで記述。ビルド時に型チェックすることで、予期せぬエラーを未然に防ぎ、コードの保守性を高めている。

### Tailwind CSS: ユーティリティファーストなスタイリング

デザインには[Tailwind CSS](https://tailwindcss.com/)を採用。ユーティリティクラスをHTMLに直接書き込むスタイルは、CSSファイルとHTMLを行き来する手間を省き、コンポーネント単位での開発と相性が良い。

## コンテンツと機能

ブログとしての表現力や利便性を高めるための仕組み。

### MarkdownとMDX

記事はすべてMarkdown。一部、インタラクティブなコンポーネントを埋め込みたい場合は、Markdown内でコンポーネントを扱えるMDXを利用することもある。

### Remark/Rehypeプラグインによる表現力向上

AstroはMarkdownの処理にRemark/Rehypeエコシステムを利用している。このブログでも、多数のプラグインを導入して表現力を高めている。

*   `remark-admonitions`: 注意書きやティップスなどの装飾
*   `rehype-katex`: KaTeXによる数式表示
*   `remark-github-card`: GitHubリポジトリのリンクを綺麗なカード形式で表示

これらにより、標準のMarkdownだけでは難しい、リッチな表現を可能にしている。

### astro-expressive-code: 高機能なシンタックスハイライト

ソースコードのシンタックスハイライトには、[Expressive Code](https://expressive-code.com/)のAstro版`astro-expressive-code`を利用。行番号の表示や特定の行のハイライトなど、コードを分かりやすく見せる機能が豊富だ。

### Pagefind: 静的サイト向けサイト内検索

サイト内検索には、Rust製の高速な検索ツール[Pagefind](https://pagefind.app/)を導入。ビルド時にサイト全体のインデックスを生成し、クライアントサイドJSで検索機能を提供するため、サーバー実装が不要で静的サイトと非常に相性が良い。

## ホスティングと自動デプロイ

### Netlifyによる快適なホスティングとCI/CD

このブログは、静的サイトのホスティングプラットフォーム[Netlify](https://www.netlify.com/)上で公開している。Netlifyを選んだ理由は、その手軽さと強力な自動化機能にある。

**主なメリット:**

*   **簡単デプロイ:** GitHubリポジトリをNetlifyに接続するだけで、`main`ブランチへのプッシュをトリガーに、自動でビルドとデプロイが実行される。
*   **プレビュー機能:** プルリクエストを作ると、変更内容を反映したプレビューサイトが自動で生成される。マージ前に実際の表示を確認できるため、安心して変更を反映できる。
*   **グローバルCDN:** NetlifyのCDNにより、世界中のどこからアクセスしてもサイトが高速に表示される。

**デプロイフロー:**

1.  ローカルで記事を書き、`git push`でGitHubに反映。
2.  プッシュを検知したNetlifyがソースコードを取得。
3.  `package.json`などの設定に基づき、`npm run build`でビルドを実行。
4.  生成された静的ファイル（`dist`ディレクトリ）がCDNに自動デプロイされる。

記事を`git push`するだけで、数分後には公開が完了する、という非常に効率的なフローが実現できている。

## このブログのようなサイトを構築する手順

このブログの構成を参考に、Astroでブログを構築する手順を解説する。

### 1. 前提条件

*   Git
*   Node.js (LTS)
*   GitHubアカウント
*   Netlifyアカウント

### 2. Astroプロジェクトの作成

まず、ターミナルで以下のコマンドを実行し、新しいAstroプロジェクトを作る。

```bash
# "my-astro-blog"の部分は好きなプロジェクト名に変更
npm create astro@latest my-astro-blog
```

対話形式でいくつか質問されるので、ブログ用途なら`A blog`テンプレートを選択するのが簡単だ。

**よりデザイン性の高いテンプレートから始めたい場合**

[Astro公式サイトのテーマカタログ](https://astro.build/themes/)には、コミュニティ製の美しいテーマが多数ある。好みのデザインを探し、各テーマの指示に従ってインストールするのも良いだろう。このブログのテーマも、ここにあるものをベースにしている。

### 3. ローカルでの開発

プロジェクトのディレクトリに移動し、開発サーバーを起動する。

```bash
cd my-astro-blog
npm run dev
```

ブラウザで `http://localhost:4321` にアクセスすれば、ブログのテンプレートが表示されるはずだ。

### 4. 基本的なカスタマイズ

`npm create astro`で作ったブログテンプレートは設定がシンプルだ。

*   **サイト情報:** `src/consts.ts`の`SITE_TITLE`と`SITE_DESCRIPTION`を書き換える。
*   **記事の追加:** `src/content/blog/`にMarkdownファイルを追加すれば記事になる。
*   **デザインの変更:** `src/styles/global.css`を編集したり、[Astroのインテグレーション](https://docs.astro.build/ja/guides/integrations-guide/)でTailwind CSSなどを追加したりして、デザインを自由に変更できる。

**このブログの機能を追加するには**

この記事の前半で紹介したツール（`astro-expressive-code`や`Pagefind`など）を、自分のプロジェクトに個別に追加していくことで再現できる。各ツールの公式サイトを参考に、ぜひ挑戦してみてほしい。

### 5. Netlifyへのデプロイ

1.  まず、作成したプロジェクトをGitHubにプッシュする。
    *   GitHub上で新しいリポジトリを作る。
    *   ローカルとリモートを接続してプッシュ。
    ```bash
    git remote add origin https://github.com/<YOUR_USERNAME>/<YOUR_REPOSITORY_NAME>.git
    git branch -M main
    git push -u origin main
    ```
2.  [Netlify](https://www.netlify.com/)にログインし、「Add new site」>「Import an existing project」から、作成したGitHubリポジトリを選択。
3.  ビルド設定は自動で認識されるが、以下を確認。
    *   **Build command:** `npm run build`
    *   **Publish directory:** `dist`
4.  「Deploy site」をクリック。

これで、あなただけのブログが公開される。

## おわりに

この記事では、このブログを支える技術スタックと、それを活用した執筆・開発フローについて解説した。

*   **執筆・知識管理:** Obsidian
*   **構成・推敲:** Gemini-cli
*   **フレームワーク:** Astro + TypeScript + Tailwind CSS
*   **ホスティング & CI/CD:** Netlify

モダンな静isticサイトジェネレーターとAIツールを組み合わせることで、非常に効率的で快適なブログ執筆環境を構築できている。この記事が、これからブログを作ろうと考えている方の参考になれば嬉しい。
