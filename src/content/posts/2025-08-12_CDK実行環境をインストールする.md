---
title: 'CDK実行環境をインストールする'
draft: false
published: 2025-08-12
description: 'WSL2(Ubuntu)にHomebrew・Nodebrew・AWS CLI・AWS CDK・TypeScriptをインストールして、TypeScriptでCDKを開発する環境を構築する手順について解説します。'
tags:
  - 'AWS_CDK'
  - 'Homebrew'
  - 'Nodebrew'
  - 'TypeScript'
  - 'WSL2'
toc: true
coverImage:
  src: '_assets/IMG_1145.jpeg'
  alt: ''
---
## はじめに

この記事では、AWS CDKをTypeScriptで開発するための環境を、WSL2(Ubuntu)上に構築する手順を解説します。

### なぜTypeScriptなのか？

- AWS CDKの標準：TypeScriptはAWS CDKで最初にサポートされた言語であり、公式ドキュメントやコミュニティのサンプルが最も豊富です。型安全な開発が可能で、大規模なインフラ構成でもコードの保守性を高く保つことができます。

### なぜNode.jsのバージョン管理にNodebrewを使うのか？

- プロジェクトごとの環境分離：プロジェクトによって要求されるNode.jsのバージョンが異なるケースに対応するため、バージョンマネージャーである`nodebrew`を導入します。これにより、システム全体に影響を与えることなく、プロジェクトごとにNode.jsのバージョンを切り替えることができます。

### その他ツールの活用目的

*   Homebrew：`nodebrew`や`awscli`など、開発に必要な各種ツールを簡単にインストール・管理するために利用します。
*   awsp：AWSのプロファイルをインタラクティブに切り替えることができる便利なツールです。複数のAWSアカウントやロールを扱う際に、作業効率を大幅に向上させます。

この構成により、標準的で堅牢なCDK開発環境と、効率的なAWSアカウント管理を両立させることを目指します。

## 0.概要

1. Ubuntuインストール
2. Homebrewインストール
3. Nodebrewインストール
4. Nodeセットアップ
5. AWS CLIインストール
6. AWSPインストール
7. AWSプロファイル作成（SSO環境）
8. AWS CDKインストール
9. TypeScriptインストール

## 1.Ubuntuインストール

そのとき最新のLTSを入れる。現時点では24.04.1。

[**Ubuntuを入手する | Ubuntu** _Ubuntuは、スマートフォン、タブレット端末、PCからサーバー、クラウドまであらゆる環境で動作するオープンソースのソフト_ _jp.ubuntu.com_](https://jp.ubuntu.com/download)[](https://jp.ubuntu.com/download)

## 2.Homebrewインストール

パッケージ管理ツールの一つ。ここではNodebrewのインストールに使う。

[**Homebrew** _The Missing Package Manager for macOS (or Linux)._ _brew.sh_](https://brew.sh/ja/)[](https://brew.sh/ja/)

インストール方法は公式サイトに従う。  
PATHを通すのを忘れないこと。

PATHは公式の通りでも良いし、~/.profileに以下のように追記しても良いと思う。

```bash
## homebrew設定
### homebrewのパスを変数に格納
HOMEBREW_PATH="/home/linuxbrew/.linuxbrew/bin"
### PATHにhodebrewのパスが含まれているか確認
if [[ ":$PATH:" != *":$HOMEBREW_PATH:"* ]]; then
    # パスが存在しない場合は追加
    export PATH="$HOMEBREW_PATH:$PATH"
fi
```

## 3.Nodebrewインストール

```bash
brew install nodebrew
```

PATHを通すのを忘れないこと。  
ここでも、~/.profileに以下のようにしても良いと思う。

```bash
## nodebrew設定
### nodebrewのパスを変数に格納
NODEBREW_PATH="/home/linuxbrew/.linuxbrew/var/nodebrew/current/bin"
### PATHにnodebrewのパスが含まれているか確認
if [[ ":$PATH:" != *":$NODEBREW_PATH:"* ]]; then
    # パスが存在しない場合は追加
    export PATH="$NODEBREW_PATH:$PATH"
fi
export NODEBREW_ROOT=/home/linuxbrew/.linuxbrew/var/nodebrew
```

## 4.Nodebrewセットアップ

```bash
## Nodebrew セットアップ
nodebrew setup

## インストール可能なnode.jsのバージョンを確認（明確に必要なバージョンが分かってるなら飛ばしてもいい）
nodebrew ls-remote
 
## node.jsインストール
nodebrew install <バージョン>
 
## 使用するnode.jsの指定
nodebrew use <バージョン>
```

## 5.AWS CLIインストール

```bash
brew install awscli
```

以下のように~/.profileに追記してタブ補完も有効にしておく。

```bash
## AWSCLIタブ補完
complete -C '/home/linuxbrew/.linuxbrew/bin/aws_completer' aws
```

## 6.AWSPインストール

```bash
npm install -g awsp
```

インストール後はエイリアスを設定しておく。  
~/.bashrcに以下を追記。

```bash
alias awsp="source _awsp"
```

## 7.AWSプロファイル作成（SSO環境）

```bash
aws configure sso
```

コマンド入力後は流れに従う。  

## 8.AWS CDKインストール

```bash
npm install -g aws-cdk
```

## 9.TypeScriptインストール

```bash
cd <プロジェクトディレクトリ>
npm install --save-dev typescript ts-node
```

TypeScriptプロジェクト開発時にのみ必要なプログラムは --save-dev オプションでインストールします。